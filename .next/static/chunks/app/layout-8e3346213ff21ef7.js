(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1382:function(e,t,s){Promise.resolve().then(s.bind(s,4114)),Promise.resolve().then(s.t.bind(s,2445,23))},4114:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuthContext:function(){return i}});var o=s(7437),r=s(2265);function n(e){let{isOpen:t,onClose:s,onSuccess:n}=e,[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(l(""),c(""))},[t]);let h=async e=>{e.preventDefault(),d(!0),c(""),await new Promise(e=>setTimeout(e,300)),"chlebicky2025"===a?(n(),s()):(c("Nespr\xe1vn\xe9 heslo"),l("")),d(!1)};return t?(0,o.jsx)("div",{className:"modal-overlay password-modal-overlay",onClick:s,children:(0,o.jsxs)("div",{className:"modal-content password-modal-large",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h2",{children:"\uD83D\uDD10 Ověřen\xed př\xedstupu"}),(0,o.jsx)("button",{className:"modal-close",onClick:s,"aria-label":"Zavř\xedt",children:"\xd7"})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsxs)("div",{className:"password-content",children:[(0,o.jsx)("div",{className:"password-icon",children:"\uD83D\uDD12"}),(0,o.jsx)("h3",{children:"Př\xedstup k \xfaprav\xe1m"}),(0,o.jsx)("p",{children:"Pro přid\xe1n\xed nebo odebr\xe1n\xed bodů zadej heslo:"}),(0,o.jsxs)("form",{onSubmit:h,children:[(0,o.jsxs)("div",{className:"password-input-group",children:[(0,o.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>{"Escape"===e.key&&s()},placeholder:"Zadej heslo...",className:"password-input-large",autoFocus:!0,disabled:u}),i&&(0,o.jsx)("div",{className:"error-message",children:i})]}),(0,o.jsxs)("div",{className:"password-actions",children:[(0,o.jsx)("button",{type:"button",onClick:s,className:"btn btn-secondary",disabled:u,children:"Zrušit"}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u||!a.trim(),children:u?"Ověřuji...":"Ověřit"})]})]})]})})]})}):null}let a=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(!1),{isAuthenticated:i,authenticate:c,isLoading:u,logout:d}=function(){let[e,t]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("sandwich-auth");if(e){let{timestamp:s}=JSON.parse(e);Date.now()-s<18e5?t(!0):(localStorage.removeItem("sandwich-auth"),t(!1))}else t(!1)}catch(e){console.error("Chyba při kontrole ověřen\xed:",e),t(!1)}finally{o(!1)}})()},[]),{isAuthenticated:e,isLoading:s,authenticate:()=>{try{let e={timestamp:Date.now()};localStorage.setItem("sandwich-auth",JSON.stringify(e)),t(!0)}catch(e){console.error("Chyba při ukl\xe1d\xe1n\xed ověřen\xed:",e)}},logout:()=>{try{localStorage.removeItem("sandwich-auth"),t(!1)}catch(e){console.error("Chyba při odhl\xe1šen\xed:",e)}}}}(),h=()=>{l(!1)};return(0,o.jsxs)(a.Provider,{value:{showPasswordModal:()=>{i||l(!0)},hidePasswordModal:h,isPasswordModalOpen:s,isAuthenticated:i,isLoading:u,logout:()=>{d()}},children:[t,s&&(0,o.jsx)(n,{isOpen:s,onClose:h,onSuccess:()=>{c(),h()}})]})}function i(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAuthContext must be used within an AuthProvider");return e}},2445:function(){},622:function(e,t,s){"use strict";var o=s(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var o,n={},c=null,u=null;for(o in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:u,props:n,_owner:l.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=1382)}),_N_E=e.O()}]);