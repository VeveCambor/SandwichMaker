(()=>{var e={};e.id=564,e.ids=[564],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},661:e=>{"use strict";e.exports=require("sqlite3")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8245:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var i=r(482),s=r(9108),n=r(2563),a=r.n(n),o=r(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["stats",{children:["[year]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8856)),"/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/stats/[year]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2917)),"/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/stats/[year]/page.tsx"],u="/stats/[year]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/stats/[year]/page",pathname:"/stats/[year]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1751:()=>{},2671:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},169:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1900,23)),Promise.resolve().then(r.t.bind(r,1476,23))},2917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});var i=r(5036);r(7272);let s={title:"SandwichMaker - Kdo chyst\xe1 chleb\xedčky?",description:"Aplikace pro sledov\xe1n\xed, kdo tento měs\xedc chyst\xe1 chleb\xedčky"};function n({children:e}){return i.jsx("html",{lang:"cs",children:i.jsx("body",{className:"antialiased",children:e})})}},8856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var i=r(5036),s=r(646),n=r.n(s),a=r(5904),o=r.n(a),l=r(2790),d=r(9264);async function c({params:e}){let t=e.year,r=await (0,l.pv)(t);return(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"header",children:[(0,i.jsxs)("h1",{className:"title",children:["Statistiky v\xfdherců ",t]}),i.jsx("p",{className:"subtitle",children:"Přehled měs\xedčn\xedch v\xedtězů"})]}),i.jsx("div",{style:{textAlign:"center",marginBottom:"2rem"},children:i.jsx(n(),{href:"/",className:"btn btn-primary",children:"← Zpět na dashboard"})}),0===r.length?(0,i.jsxs)("div",{className:"loading",children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\uD83D\uDCCA"}),(0,i.jsxs)("p",{children:["Zat\xedm nejsou ž\xe1dn\xe9 statistiky pro rok ",t]})]}):i.jsx("div",{className:"stats-grid",children:r.map((e,t)=>(0,i.jsxs)("div",{className:"stat-card",style:{animationDelay:`${.1*t}s`,animation:"slideInFromBottom 0.6s ease-out forwards",opacity:0,transform:"translateY(20px)"},children:[(0,i.jsxs)("div",{className:"stat-header",children:[i.jsx("h3",{className:"stat-month",children:(0,d.ZY)(e.month)}),i.jsx("div",{className:"stat-year",children:e.month.split("-")[0]})]}),0===e.winners.length?(0,i.jsxs)("div",{className:"no-winner",children:[i.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83D\uDE07"}),i.jsx("p",{children:"Ž\xe1dn\xfd v\xedtěz"})]}):i.jsx("div",{className:"winners-grid",children:e.winners.map((e,t)=>(0,i.jsxs)("div",{className:"winner-card",children:[i.jsx("div",{className:"winner-avatar",children:i.jsx(o(),{src:`/avatars/${e.avatar_file}`,alt:`Avatar ${e.name}`,width:60,height:60})}),i.jsx("div",{className:"winner-name",children:e.name}),i.jsx("div",{className:"winner-trophy",children:"\uD83C\uDFC6"})]},e.id))})]},e.month))})]})}},9264:(e,t,r)=>{"use strict";r.d(t,{ZY:()=>s});let i=["Leden","\xdanor","Březen","Duben","Květen","Červen","Červenec","Srpen","Z\xe1ř\xed","Ř\xedjen","Listopad","Prosinec"];function s(e){return i[parseInt(e.split("-")[1])-1]}},2790:(e,t,r)=>{"use strict";r.d(t,{Cl:()=>v,Yi:()=>x,pv:()=>_});var i=r(6702),s=r(8727),n=r(2409);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,o=process.env.SUPABASE_SERVICE_ROLE_KEY,l=a&&o?(0,n.eI)(a,o):null;async function d(e){if(!l)throw Error("Supabase not configured");let{data:t,error:r}=await l.from("players").select(`
      id,
      name,
      avatar_file,
      monthly_scores!inner(points)
    `).eq("monthly_scores.month",e);if(r)throw r;return t.map(e=>({id:e.id,name:e.name,avatar_file:e.avatar_file,points:e.monthly_scores?.[0]?.points||0}))}async function c(e){if(!l)throw Error("Supabase not configured");let t=[];for(let r=1;r<=12;r++){let i=`${e}-${r.toString().padStart(2,"0")}`,{data:s}=await l.from("players").select("id, name, avatar_file").eq("monthly_scores.month",i).eq("monthly_scores.points",3);t.push({month:i,winners:s||[]})}return t}var u=r(661),m=r.n(u),p=r(8290);let h=null;async function f(){if(!h&&(h=await (0,p.bA)({filename:"./sandwichmaker.db",driver:m().Database}),await h.exec(`
      CREATE TABLE IF NOT EXISTS players (
        id TEXT PRIMARY KEY,
        name TEXT NOT NULL UNIQUE,
        avatar_file TEXT NOT NULL
      );

      CREATE TABLE IF NOT EXISTS monthly_scores (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        player_id TEXT NOT NULL,
        month TEXT NOT NULL,
        points INTEGER NOT NULL DEFAULT 0,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(player_id, month),
        FOREIGN KEY (player_id) REFERENCES players(id) ON DELETE CASCADE
      );

      CREATE TABLE IF NOT EXISTS monthly_meta (
        month TEXT PRIMARY KEY,
        winner_shown_at DATETIME
      );

      CREATE INDEX IF NOT EXISTS idx_monthly_scores_month ON monthly_scores(month);
      CREATE INDEX IF NOT EXISTS idx_monthly_scores_player_month ON monthly_scores(player_id, month);
      CREATE INDEX IF NOT EXISTS idx_monthly_scores_points ON monthly_scores(points);
    `),0===(await h.all("SELECT COUNT(*) as count FROM players"))[0].count)){let e=v();await h.exec(`
        INSERT INTO players (id, name, avatar_file) VALUES
        ('1', 'Petr', 'BigC.png'),
        ('2', 'Marcus', 'Marcus.png'),
        ('3', 'Vratis', 'Vratis.png'),
        ('4', 'Wewe', 'Wewe.png')
      `),await h.exec(`
        INSERT INTO monthly_scores (player_id, month, points) VALUES
        ('1', '${e}', 3),
        ('2', '${e}', 0),
        ('3', '${e}', 2),
        ('4', '${e}', 1)
      `)}return h}async function g(e){let t=await f();return await t.all(`
    SELECT p.id, p.name, p.avatar_file, COALESCE(ms.points, 0) as points
    FROM players p
    LEFT JOIN monthly_scores ms ON p.id = ms.player_id AND ms.month = ?
    ORDER BY p.name
  `,[e])}async function y(e){let t=await f(),r=await t.all(`
    SELECT ms.month, p.id, p.name, p.avatar_file
    FROM monthly_scores ms
    JOIN players p ON ms.player_id = p.id
    WHERE ms.month LIKE ? AND ms.points = 3
    ORDER BY ms.month
  `,[`${e}-%`]),i={};for(let e of r)i[e.month]||(i[e.month]=[]),i[e.month].push({id:e.id,name:e.name,avatar_file:e.avatar_file});let s=[];for(let t=1;t<=12;t++){let r=`${e}-${t.toString().padStart(2,"0")}`;s.push({month:r,winners:i[r]||[]})}return s}function v(){let e=(0,i.Z)(new Date,"Europe/Prague");return(0,s.Z)(e,"yyyy-MM")}let E="1"===process.env.VERCEL;async function x(e){return E?d(e):g(e)}async function _(e){return E?c(e):y(e)}},6987:(e,t,r)=>{let{createProxy:i}=r(6843);e.exports=i("/Users/veva/Desktop/NewGitRepository/SandwichMaker/node_modules/next/dist/client/image-component.js")},4470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return o}}),r(6031);let i=r(6184),s=r(4180);function n(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var r;let o,l,d,{src:c,sizes:u,unoptimized:m=!1,priority:p=!1,loading:h,className:f,quality:g,width:y,height:v,fill:E=!1,style:x,onLoad:_,onLoadingComplete:w,placeholder:b="empty",blurDataURL:N,fetchPriority:S,layout:T,objectFit:j,objectPosition:I,lazyBoundary:P,lazyRoot:O,...R}=e,{imgConf:C,showAltText:A,blurComplete:D,defaultLoader:M}=t,L=C||s.imageConfigDefault;if("allSizes"in L)o=L;else{let e=[...L.deviceSizes,...L.imageSizes].sort((e,t)=>e-t),t=L.deviceSizes.sort((e,t)=>e-t);o={...L,allSizes:e,deviceSizes:t}}let k=R.loader||M;delete R.loader,delete R.srcSet;let U="__next_img_default"in k;if(U){if("custom"===o.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=k;k=t=>{let{config:r,...i}=t;return e(i)}}if(T){"fill"===T&&(E=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[T];e&&(x={...x,...e});let t={responsive:"100vw",fill:"100vw"}[T];t&&!u&&(u=t)}let q="",z=a(y),F=a(v);if("object"==typeof(r=c)&&(n(r)||void 0!==r.src)){let e=n(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,d=e.blurHeight,N=N||e.blurDataURL,q=e.src,!E){if(z||F){if(z&&!F){let t=z/e.width;F=Math.round(e.height*t)}else if(!z&&F){let t=F/e.height;z=Math.round(e.width*t)}}else z=e.width,F=e.height}}let B=!p&&("lazy"===h||void 0===h);(!(c="string"==typeof c?c:q)||c.startsWith("data:")||c.startsWith("blob:"))&&(m=!0,B=!1),o.unoptimized&&(m=!0),U&&c.endsWith(".svg")&&!o.dangerouslyAllowSVG&&(m=!0),p&&(S="high");let G=a(g),X=Object.assign(E?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:j,objectPosition:I}:{},A?{}:{color:"transparent"},x),Y=D||"empty"===b?null:"blur"===b?'url("data:image/svg+xml;charset=utf-8,'+(0,i.getImageBlurSvg)({widthInt:z,heightInt:F,blurWidth:l,blurHeight:d,blurDataURL:N||"",objectFit:X.objectFit})+'")':'url("'+b+'")',$=Y?{backgroundSize:X.objectFit||"cover",backgroundPosition:X.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Y}:{},V=function(e){let{config:t,src:r,unoptimized:i,width:s,quality:n,sizes:a,loader:o}=e;if(i)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:d}=function(e,t,r){let{deviceSizes:i,allSizes:s}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let i;i=e.exec(r);i)t.push(parseInt(i[2]));if(t.length){let e=.01*Math.min(...t);return{widths:s.filter(t=>t>=i[0]*e),kind:"w"}}return{widths:s,kind:"w"}}return"number"!=typeof t?{widths:i,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>s.find(t=>t>=e)||s[s.length-1]))],kind:"x"}}(t,s,a),c=l.length-1;return{sizes:a||"w"!==d?a:"100vw",srcSet:l.map((e,i)=>o({config:t,src:r,quality:n,width:e})+" "+("w"===d?e:i+1)+d).join(", "),src:o({config:t,src:r,quality:n,width:l[c]})}}({config:o,src:c,unoptimized:m,width:z,quality:G,sizes:u,loader:k});return{props:{...R,loading:B?"lazy":h,fetchPriority:S,width:z,height:F,decoding:"async",className:f,style:{...X,...$},sizes:V.sizes,srcSet:V.srcSet,src:V.src},meta:{unoptimized:m,priority:p,placeholder:b,fill:E}}}},6184:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:i,blurHeight:s,blurDataURL:n,objectFit:a}=e,o=i?40*i:t,l=s?40*s:r,d=o&&l?"viewBox='0 0 "+o+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+d+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(d?"none":"contain"===a?"xMidYMid":"cover"===a?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+n+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},4180:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return i}});let r=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},7751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{unstable_getImgProps:function(){return l},default:function(){return d}});let i=r(6783),s=r(4470),n=r(6031),a=r(6987),o=i._(r(4534)),l=e=>{(0,n.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},d=a.Image},4534:(e,t)=>{"use strict";function r(e){let{config:t,src:r,width:i,quality:s}=e;return t.path+"?url="+encodeURIComponent(r)+"&w="+i+"&q="+(s||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}}),r.__next_img_default=!0;let i=r},6031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},5904:(e,t,r)=>{e.exports=r(7751)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[73,11],()=>r(8245));module.exports=i})();