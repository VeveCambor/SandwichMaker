(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},661:e=>{"use strict";e.exports=require("sqlite3")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3418:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(482),n=s(9108),a=s(2563),i=s.n(a),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2284)),"/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4250)),"/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/page.tsx"],u="/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7063:(e,t,s)=>{Promise.resolve().then(s.bind(s,2669)),Promise.resolve().then(s.bind(s,6305)),Promise.resolve().then(s.bind(s,5377)),Promise.resolve().then(s.bind(s,9398)),Promise.resolve().then(s.bind(s,8652)),Promise.resolve().then(s.t.bind(s,1476,23))},2669:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5344),n=s(3729),a=s(8151),i=s(8652);function o({selectedMonth:e}){let[t,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),u=async()=>{d(!0);try{console.log("Vyhodnocuji měs\xedc:",e);let t=await (0,a.$J)(e);console.log("V\xfdsledek vyhodnocen\xed:",t),t.success&&t.winners?(l(t.winners),s(!0),console.log("Modal se otev\xedr\xe1 s v\xedtězi:",t.winners)):(console.log("Ž\xe1dn\xed v\xedtězov\xe9 nebo chyba:",t),l([]),s(!0))}catch(e){console.error("Chyba při vyhodnocov\xe1n\xed:",e)}finally{d(!1)}};return(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:u,disabled:c,className:"btn btn-secondary",children:c?"⏳ Vyhodnocuji...":"\uD83C\uDFC6 Vyhodnotit měs\xedc"}),r.jsx(i.default,{isOpen:t,onClose:()=>s(!1),winners:o,month:e})]})}},6305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5344),n=s(8183);function a(){let{isAuthenticated:e,logout:t}=(0,n.useAuthContext)();return e?r.jsx("button",{onClick:t,className:"logout-btn",title:"Odhl\xe1sit se (30 minut)",children:"\uD83D\uDD13 Odhl\xe1sit"}):null}},5377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5344),n=s(2254),a=s(7606);function i({currentMonth:e,selectedMonth:t}){let s=(0,n.useRouter)(),i=(0,n.useSearchParams)(),o=e=>{let t=new URLSearchParams(i);t.set("month",e),s.push(`/?${t.toString()}`)},l=(()=>{let t=[],[s,r]=e.split("-").map(Number);for(let e=11;e>=0;e--){let n=s,a=r-e;a<=0&&(a+=12,n-=1);let i=`${n}-${a.toString().padStart(2,"0")}`;t.push(i)}return t})();return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#374151",fontWeight:"500"},children:"Měs\xedc:"}),r.jsx("select",{value:t,onChange:e=>o(e.target.value),style:{padding:"0.5rem 1rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",background:"white",color:"#374151",fontWeight:"500"},children:l.map(t=>(0,r.jsxs)("option",{value:t,children:[(0,a.ZY)(t)," ",t.split("-")[0],t===e?" (aktu\xe1ln\xed)":""]},t))})]})}},9398:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5344),n=s(1223),a=s.n(n),i=s(3729),o=s(8151),l=s(8183);function c({player:e}){let[t,s]=(0,i.useState)(e.points),[n,c]=(0,i.useState)(!1),{isAuthenticated:d,showPasswordModal:u}=(0,l.useAuthContext)(),p=async()=>{if(!(t>=3)&&!n){if(!d){u();return}c(!0),s(e=>Math.min(3,e+1));try{(await (0,o._q)(e.id)).success||s(e.points)}catch(t){s(e.points)}finally{c(!1)}}},h=async()=>{if(!(t<=0)&&!n){if(!d){u();return}c(!0),s(e=>Math.max(0,e-1));try{(await (0,o.CR)(e.id)).success||s(e.points)}catch(t){s(e.points)}finally{c(!1)}}};return(0,r.jsxs)("div",{className:"player-container",children:[(0,r.jsxs)("div",{className:"player-card",children:[r.jsx("div",{className:"avatar",children:r.jsx(a(),{src:`/avatars/${e.avatar_file}`,alt:`Avatar ${e.name}`,width:120,height:120})}),r.jsx("h3",{className:"player-name",children:e.name})]}),t>0&&r.jsx("div",{className:"sandwiches",children:Array(t).fill(0).map((e,t)=>r.jsx(a(),{src:"/images/chleb.png",alt:"chleb\xedček",width:28,height:28,className:"sandwich-icon"},t))}),(0,r.jsxs)("div",{className:"buttons",children:[r.jsx("button",{onClick:h,disabled:t<=0||n,className:`btn-circle ${d?"":"btn-locked"}`,title:d?"Odebrat bod":"Klikni pro odemknut\xed",children:n?"...":"−"}),r.jsx("button",{onClick:p,disabled:t>=3||n,className:`btn-circle ${d?"":"btn-locked"}`,title:d?"Přidat bod":"Klikni pro odemknut\xed",children:n?"...":"+"})]})]})}},2254:(e,t,s)=>{e.exports=s(4767)},2284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(5036),n=s(2),a=s(646),i=s.n(a),o=s(2790),l=s(9264),c=s(6843);let d=(0,c.createProxy)(String.raw`/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/components/PlayerCard.tsx`),{__esModule:u,$$typeof:p}=d,h=d.default,m=(0,c.createProxy)(String.raw`/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/components/WinnerModal.tsx`),{__esModule:x,$$typeof:v}=m,y=(m.default,(0,c.createProxy)(String.raw`/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/components/MonthSelector.tsx`)),{__esModule:g,$$typeof:b}=y,j=y.default,f=(0,c.createProxy)(String.raw`/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/components/EvaluateButton.tsx`),{__esModule:w,$$typeof:k}=f,N=f.default,P=(0,c.createProxy)(String.raw`/Users/veva/Desktop/NewGitRepository/SandwichMaker/app/components/LogoutButton.tsx`),{__esModule:S,$$typeof:_}=P,M=P.default;async function q({searchParams:e}){let t=(0,o.Cl)(),s=e.month||t,n=await (0,o.Yi)(s);return(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"top-panel",children:[r.jsx("div",{className:"month-selector",children:r.jsx(j,{currentMonth:t,selectedMonth:s})}),r.jsx(M,{})]}),(0,r.jsxs)("div",{className:"header",children:[r.jsx("h1",{className:"title",children:"Kdo tenhle měs\xedc chyst\xe1 chleb\xedčky?"}),(0,r.jsxs)("p",{className:"subtitle",children:[(0,l.ZY)(s)," ",s.split("-")[0]]})]}),r.jsx("div",{className:"players-grid",children:0===n.length?(0,r.jsxs)("div",{className:"loading",children:[r.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\uD83E\uDD6A"}),r.jsx("p",{children:"Zat\xedm nejsou ž\xe1dn\xed hr\xe1či"})]}):n.map((e,t)=>r.jsx("div",{style:{animationDelay:`${100*t}ms`,animation:"fadeIn 0.5s ease-in-out forwards",opacity:0},children:r.jsx(h,{player:e})},e.id))}),(0,r.jsxs)("div",{className:"action-buttons",children:[r.jsx(i(),{href:`/stats/${new Date().getFullYear()}`,className:"btn btn-primary",children:"\uD83D\uDCCA Zobrazit statistiku"}),r.jsx(N,{selectedMonth:s})]})]})}async function D({searchParams:e}){return(0,o.Cl)(),e.month,(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Suspense,{fallback:(0,r.jsxs)("div",{className:"loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Nač\xedt\xe1m..."})]}),children:r.jsx(q,{searchParams:e})}),!1]})}}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[454,308,479],()=>s(3418));module.exports=r})();